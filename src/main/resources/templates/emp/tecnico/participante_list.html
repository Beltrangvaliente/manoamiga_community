<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org" th:replace="emp/tecnico/layouts/layout::layout( ~{::body} )">

    <body>
        <div data-toggle="indice"></div>        
        <div class="container">
            <h3>Participantes</h3>
            <a href="form" class="btn btn-primary btn-sm">Nuevo</a>
            <a class="ml-5" href="#" onclick="tecnara.ocultar('formulario')" data-memory="2">Ver filtros</a>

            <form id="formulario" class="d-none mt-3"  >  
                <div class="row">
                    <div class="col-md-4 col-6">
                        <label>Nombre del Participante</label>
                        <input data-memory="2" class="form-control" name="filtro" placeholder="Introduce un texto para buscar"/>
                    </div>
                    <div class="col-md-2 col-6">
                        <label>Fecha desde</label>
                        <input data-memory="2" class="form-control" type="date" name="fechaDardeDesde" />
                    </div>
                    <div class="col-md-2 col-6">
                        <label>Fecha desde</label>
                        <input data-memory="2" class="form-control" type="date" name="fechaDardeHasta" />
                    </div>
                    <div class="col-md-2 col-6">
                        <label>Contactado</label>
                        <select data-memory="2" class="form-control" name="contactado" >
                            <option value="">Todos</option>
                            <option value="No">No</option>
                            <option value="Si">Si</option>
                        </select>
                    </div>
                    <div class="col-md-2 col-sm-12">
                        <label class="btn-block">&nbsp;</label>
                        <button onclick="tecnara.refrescarTablas()" class="btn btn-primary" ><i class="fas fa-search"></i> Filtrar</button>
                    </div>    
                </div>

            </form>

            <script>
                tecnara.filtroTabla = function (params) {
                    params.filtro = $("*[name='filtro']").val();
                    params.fechaDardeDesde = $("*[name='fechaDardeDesde']").val();
                    params.fechaDardeHasta = $("*[name='fechaDardeHasta']").val();
                    params.contactado = $("*[name='contactado' ]").val();

                    return params;
                }


            </script>
            <div class="row mt-3 mb-3">
                <div class="col-12">

                    <table class="table table-striped mt-3" 
                           data-show-export="true"   
                           data-export-data-type="all"
                           data-export-types="['excel','pdf','doc']"
                           data-title="Listado de participantes"
                           data-toggle="table" 
                           data-mobile-responsive="true" 
                           data-url="list_data" 
                           data-pagination="true"
                           data-side-pagination="server" 
                           data-query-params="tecnara.filtroTabla"> 
                        <thead>
                            <tr>
                                <th data-field="nombre" data sortable="true" >Nombre</th>
                                <th data-field="email" data sortable="true" >E-mail</th>
                                <th data-field="telefono" data sortable="true"  >Tel√©fono</th>
                                <th data-field="fecha_darde" data-formatter="tecnara.formatFecha" data sortable="true"  >Fecha Darde</th>
                                <th data-field="contactado" data sortable="true" >Contactado</th>
                                <th data-field="id" data-force-hide="true" data-formatter="tecnara.tablaBotones"></th>
                            </tr>  
                        </thead>
                    </table> 
                </div>
            </div>
        </div>
    </body>
</html> 




