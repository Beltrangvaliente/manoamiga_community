<!DOCTYPE html>
<html th:replace="expo/coordinador/layouts/layout::layout( ~{::body} )">
    <head>
        <title>Cambiar contraseña</title>
         <style>
            .eye{
                position: absolute;
            }
            #hide1{
                display:none;
            }
             #hide3{
                display:none;
            }

        </style>
    </head>

    <body>
        <script type="text/javascript">
            function validar_clave(e) {
                var caract_invalido = " ";
                var caract_longitud = 8;
                var cla1 = $('#password').val();
                var cla2 = $('#confirm-password').val();
                if (cla1 == '' || cla2 == '') {
                    alert('Debes introducir tu clave en los dos campos.');
                    //document.registro
                    e.preventDefault();
                    return false;
                }
                if (cla1.length < caract_longitud) {
                    alert('Tu clave debe constar de ' + caract_longitud + ' carácteres.');
                    //document.registro
                    e.preventDefault();
                    return false;
                }
                if (cla1.indexOf(caract_invalido) > -1) {
                    alert("Las claves no pueden contener espacios");
                    //document.registro
                    e.preventDefault();
                    return false;
                } else {
                    if (cla1 != cla2) {
                        alert("Las claves introducidas no son iguales");
                        //document.registro
                        e.preventDefault();
                        return false;
                    } else {
                        return true;
                    }
                }
            }

            $(function () {

                $('#login-form-link').click(function (e) {
                    $("#login-form").delay(100).fadeIn(100);
                    $("#register-form").fadeOut(100);
                    $('#register-form-link').removeClass('active');
                    $(this).addClass('active');
                    e.preventDefault();
                });
                $('#register-form-link').click(function (e) {
                    $("#register-form").delay(100).fadeIn(100);
                    $("#login-form").fadeOut(100);
                    $('#login-form-link').removeClass('active');
                    $(this).addClass('active');
                    e.preventDefault();
                });

                $('#register-form').submit(function (e) {
                    validar_clave(e);
                });
            });
            function mostrarPassword() {
                var x = document.getElementById("password");
                var y = document.getElementById("hide1");
                var z = document.getElementById("hide2");
                if (x.type === 'password') {
                    x.type = "text";
                    y.style.display = "block";
                    z.style.display = "none";
                } else {
                    x.type = "password";
                    y.style.display = "none";
                    z.style.display = "block";
                }
            }
            ;
            function mostrarPassword2() {
                var x = document.getElementById("confirm-password");
                var y = document.getElementById("hide3");
                var z = document.getElementById("hide4");
                if (x.type === 'password') {
                    x.type = "text";
                    y.style.display = "block";
                    z.style.display = "none";
                } else {
                    x.type = "password";
                    y.style.display = "none";
                    z.style.display = "block";
                }
            }
            ;
            

        </script>


        <div class="container">
            <h3>Cambiar contraseña</h3>

            <form name="registro" id="register-form"  action="recuperar_password_guardar" method="post" th:object="${registro}" role="form" >
                <input type="hidden" name="code" th:field="*{codigoVerificacion}" />

                <div class="row">
                    <div class="input-group col-10 col-md-8 mx-auto">
                        <div class="input-group-prepend w-25">
                            <span class="input-group-text w-100">Nueva Contraseña</span>

                        </div>
                        <input  type="password" name="passwordreg" id="password" required=""  class="form-control" placeholder="Introduce tu nueva contraseña"  th:field="*{password}"/>
                        <span class="eye"  onclick="mostrarPassword()">
                            <i id="hide1" class="fas fa-eye fa-lg p-2"style="display:none"></i>
                            <i id="hide2" class="fas fa-eye-slash fa-lg p-2" ></i>
                        </span>
                    </div>
                </div>

                <div class="row mt-3">
                    <div class="input-group col-10 col-md-8 mx-auto">
                        <div class="input-group-prepend w-25 ">
                            <span class="input-group-text w-100 text-rigth">Repetir Contraseña</span>
                        </div>
                        <input  type="password" name="confirm-passwordreg" id="confirm-password" required="" class="form-control" placeholder="Vuelva a introducir la contraseña" />
                        <span class="eye" onclick="mostrarPassword2() ">
                            <i id="hide3" class="fas fa-eye fa-lg p-2" style="display:none"></i>
                            <i id="hide4" class="fas fa-eye-slash fa-lg p-2" ></i>
                        </span>
                    </div>
                </div>

                <div class="text-center mt-3">
                    <button type="submit" id="register-submit" onclick="tecnara.mostrarAnimacion()" name="btninicio" class="btn btn-success btn-lg mb-4" value="registrar">Cambiar contraseña</button>
                </div>

                <script>
                    
                    document.getElementById("register-submit").onclick = function() {tecnara.mostrarAnimacion($("body")) };
                    
                </script>
            </form>
        </div>
    </body>
</html>
